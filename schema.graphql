type Dispatcher @entity {
  id: ID! #tokenId
  dispatcher: Bytes! # address
}

type Post @entity {
  id: ID! #tokenId
  pubId: ID! #publicationId
  contentURI: String! #content
  collectModule: Bytes! #collect address
  referenceModule: Bytes! #rm address
  referenceModuleReturn: Bytes! #abi encoded reference
  creationTime: Int! #timestamp
}

type Comment @entity {
  id: ID! #tokenId
  pubId: ID! #publicationId
  contentURI: String! #content
  profileIdPointed: ID! #pointedId
  pubIdPointed: ID! #pointed pub
  referenceModule: Bytes! #rm address
  referenceModuleReturn: Bytes! #abi encoded reference
  creationTime: Int! #timestamp
}

type Mirror @entity {
  id: ID! #tokenId
  pubId: ID! #publicationId
  contentURI: String! #content
  profileIdPointed: ID! #pointedId
  pubIdPointed: ID! #pointed pub
  referenceModule: Bytes! #rm address
  referenceModuleReturn: Bytes! #abi encoded reference
  creationTime: Int! #timestamp
}

type Publication @entity {
  id: ID!
  pubId: ID!
  referenceModule: Bytes!
  referenceModuleReturnData: Bytes
  timestamp: BigInt!
}

type Profile @entity {
  id: ID!
  name: String
  bio: String
  followNftAddress: String
  metadata: String
  handle: String!
  onwnedBy: String!
  isDefault: Boolean!
  isFollowedByMe: Boolean!
}

query Followers($profileId: ID!) {
  followers(request: { 
                profileId: $profileId,
              limit: 10
             }) {
       items {
      wallet {
        address
        defaultProfile {
          id
          name
          bio
          attributes {
            displayType
            traitType
            key
            value
          }
          followNftAddress
            metadata
          isDefault
          handle
          picture {
            ... on NftImage {
              contractAddress
              tokenId
              uri
              verified
            }
            ... on MediaSet {
              original {
                url
                mimeType
              }
            }
          }
          coverPicture {
            ... on NftImage {
              contractAddress
              tokenId
              uri
              verified
            }
            ... on MediaSet {
              original {
                url
                mimeType
              }
            }
          }
          ownedBy
          dispatcher {
            address
            canUseRelay
          }
          stats {
            totalFollowers
            totalFollowing
            totalPosts
            totalComments
            totalMirrors
            totalPublications
            totalCollects
          }
          followModule {
            ... on FeeFollowModuleSettings {
              type
              contractAddress
              amount {
                asset {
                  name
                  symbol
                  decimals
                  address
                }
                value
              }
              recipient
            }
            ... on ProfileFollowModuleSettings {
             type
            }
            ... on RevertFollowModuleSettings {
             type
            }
          }
        }
      }
      totalAmountOfTimesFollowed
    }
    pageInfo {
      prev
      next
      totalCount
    }
  }
}